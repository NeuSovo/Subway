{% extends "base.html" %}

{% block content %}
    <section>
        <div class="ui segment"><h1 class="ui header aligned center">部门管理</h1>
            <table class="ui table celled line single fixed" id="table">
                <thead>
                <tr class="center aligned">
                    <th></th>
                    <th>部门名称</th>
                    <th>负责人</th>
                    <th>职务</th>
                    <th>联系电话</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                {% for dept in object_list %}

                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>{{ dept.dept_name }}</td>
                        <td>{{ dept.dept_boss }}</td>
                        <td>{{ dept.dept_position }}</td>
                        <td>{{ dept.boos_phone }}</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                {% empty %}
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门0</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234560</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门1</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234561</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门2</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234562</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门3</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234563</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门4</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234564</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门5</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234565</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门6</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234566</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门7</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234567</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门8</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234568</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                    <tr class="center aligned">
                        <td class="collapsing">
                            <div class="ui fitted toggle checkbox"><input class="hidden" type="checkbox"
                                                                          tabindex="0"><label></label>
                            </div>
                        </td>
                        <td>部门9</td>
                        <td>李旭成</td>
                        <td>部长</td>
                        <td>1234569</td>
                        <td>
                            <div class="ui vertical animated button primary basic left floated edit_depart">
                                <div class="hidden content">编辑</div>
                                <div class="visible content"><i class="edit icon"></i></div>
                            </div>
                            <a class="ui vertical animated button primary basic right floated add_account">
                                <div class="hidden content">分配</div>
                                <div class="visible content"><i class="add user icon"></i></div>
                            </a></td>
                    </tr>
                {% endfor %}
                </tbody>
                <tfoot>
                <tr>
                    <th></th>
                    <th colspan="5">
                        <button class="ui labeled icon button positive right floated add_depart"><i
                                class="pause icon"></i>
                            添加部门
                        </button>
                        <button class="ui labeled icon button negative right floated disabled my_remove"><i
                                class="pause icon"></i>
                            删除部门
                        </button>
                    </th>
                </tr>
                </tfoot>
            </table>
            <form action="{% url 'member:dept_create' %}" method="POST" class="ui modal depart"><!--i.close.icon-->
                <div class="header">添加部门</div>
                <div class="image content">
                    <div class="ui form">
                        {% csrf_token %}
                        <div class="four fields">
                            <div class="field">{{ form.dept_name }}</div>
                            <div class="field">{{ form.dept_boss }}</div>
                            <div class="field">{{ form.dept_position }}</div>
                            <div class="field">{{ form.boss_phone }}</div>
                        </div>
                    </div>
                </div>
                <div class="actions">
                    <div class="ui black deny button">取消</div>
                    <button type="submit" class="ui positive right labeled icon button">提交<i class="checkmark icon"></i>
                    </button>
                </div>
            </form>
            <div class="ui modal edit"><!--i.close.icon-->
                <div class="header">编辑部门</div>
                <div class="image content">
                    <div class="ui form">
                        <div class="four fields">
                            <div class="field"><input type="text" placeholder="部门名称"></div>
                            <div class="field"><input type="text" placeholder="负责人"></div>
                            <div class="field"><input type="text" placeholder="职位"></div>
                            <div class="field"><input type="number" placeholder="电话"></div>
                        </div>
                    </div>
                </div>
                <div class="actions">
                    <div class="ui black deny button">取消</div>
                    <div class="ui positive right labeled icon button">提交<i class="checkmark icon"></i></div>
                </div>
            </div>
            <form class="ui modal account"><!--i.close.icon-->
                <div class="header">分配账号</div>
                <div class="image content">
                    <div class="ui form">
                        <div class="four fields">
                            <div class="field"><input type="text" placeholder="账号"></div>
                            <div class="field"><input type="text" placeholder="密码"></div>
                            <div class="field"><input type="text" placeholder="姓名"></div>
                            <div class="field"><input type="number" placeholder="职位"></div>
                        </div>
                        <p>为该部门添加账号后,可在功能->部门管理->分配账号中查看对应信息</p></div>
                </div>
                <div class="actions">
                    <div class="ui black deny button">取消</div>
                    <div class="ui positive right labeled icon button">提交<i class="checkmark icon"></i></div>
                </div>
            </form>
            <div class="ui basic modal remove">
                <div class="ui icon header"><i class="remove user icon"></i> 确认删除部门吗?</div>
                <div class="content"><p>删除该部门后,该部门下所有账号会失效!</p></div>
                <div class="actions">
                    <div class="ui red basic cancel inverted button"><i class="remove icon"></i> 否</div>
                    <div class="ui green ok inverted button"><i class="checkmark icon"></i> 是</div>
                </div>
            </div>
        </div>
    </section>
{% endblock content %}
{% block script %}
    <script>
        var check_num = 0
        $('.add_depart').click(function () {
            $('.ui.modal.depart').modal('show')
        })
        $('.edit_depart').click(function () {
            $('.ui.modal.edit').modal('show')
        })
        $('.add_account').click(function () {
            $('.ui.modal.account').modal('show')
        })
        $('.my_remove').click(function () {
            $('.ui.modal.remove').modal('show')
        })
        $('.checkbox').checkbox({
            onChecked: function () {
                check_num++
                debugger
                if (check_num > 0) $('.my_remove').removeClass('disabled')
            },
            onUnchecked: function () {
                check_num--
                if (check_num == 0) $('.my_remove').addClass('disabled')
            }
        })</script>
{% endblock script %}

